<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Pontos - Implementação</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1><i class="fas fa-graduation-cap"></i> Sistema de Mérito Acadêmico</h1>
                <p>Faça login para acessar o sistema</p>
            </div>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Senha</label>
                    <input type="password" id="loginPassword" required placeholder="Digite sua senha">
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i> Entrar
                </button>
            </form>
        </div>
    </div>

    <!-- Main Application (hidden by default) -->
    <div id="mainApp" class="container" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-graduation-cap"></i> Sistema de Mérito Acadêmico</h1>
                <p id="userWelcome">Bem-vindo ao sistema</p>
                <button class="btn btn-secondary btn-sm" onclick="handleLogout()" style="margin-top: 10px;">
                    <i class="fas fa-sign-out-alt"></i> Sair
                </button>
            </div>
        </header>

        <!-- Navigation - Admin -->
        <nav id="adminNav" class="nav-tabs" style="display: none;">
            <button class="nav-tab active" data-tab="admin-students">
                <i class="fas fa-user-graduate"></i> Gerenciar Alunos
            </button>
            <button class="nav-tab" data-tab="admin-companies">
                <i class="fas fa-building"></i> Gerenciar Empresas
            </button>
        </nav>

        <!-- Navigation - Student -->
        <nav id="studentNav" class="nav-tabs" style="display: none;">
            <button class="nav-tab active" data-tab="student-advantages">
                <i class="fas fa-store"></i> Vantagens Disponíveis
            </button>
            <button class="nav-tab" data-tab="student-coupons">
                <i class="fas fa-ticket-alt"></i> Meus Cupons
            </button>
            <button class="nav-tab" data-tab="student-extract">
                <i class="fas fa-wallet"></i> Meu Extrato
            </button>
        </nav>

        <!-- Navigation - Professor -->
        <nav id="professorNav" class="nav-tabs" style="display: none;">
            <button class="nav-tab active" data-tab="professor-send-coins">
                <i class="fas fa-coins"></i> Enviar Moedas
            </button>
            <button class="nav-tab" data-tab="professor-students">
                <i class="fas fa-user-graduate"></i> Alunos e Resgates
            </button>
            <button class="nav-tab" data-tab="professor-extract">
                <i class="fas fa-list"></i> Extrato
            </button>
        </nav>

        <!-- Navigation - Company -->
        <nav id="companyNav" class="nav-tabs" style="display: none;">
            <button class="nav-tab active" data-tab="company-advantages">
                <i class="fas fa-gift"></i> Minhas Vantagens
            </button>
        </nav>

        <!-- Admin: Students Section -->
        <section id="admin-students" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-user-graduate"></i> Gerenciar Alunos</h2>
                <button class="btn btn-primary" onclick="openStudentModal()">
                    <i class="fas fa-plus"></i> Novo Aluno
                </button>
            </div>

            <!-- Search and Filter -->
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="studentSearch" placeholder="Buscar alunos..." onkeyup="filterStudents()">
                </div>
            </div>

            <!-- Students Table -->
            <div class="table-container">
                <table class="data-table" id="studentsTable">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>CPF</th>
                            <th>Email</th>
                            <th>Instituição</th>
                            <th>Curso</th>
                            <th>Pontos</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        <!-- Students will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Admin: Companies Section -->
        <section id="admin-companies" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-building"></i> Gerenciar Empresas</h2>
                <button class="btn btn-primary" onclick="openCompanyModal()">
                    <i class="fas fa-plus"></i> Nova Empresa
                </button>
            </div>

            <!-- Search and Filter -->
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="companySearch" placeholder="Buscar empresas..." onkeyup="filterCompanies()">
                </div>
            </div>

            <!-- Companies Table -->
            <div class="table-container">
                <table class="data-table" id="companiesTable">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>CNPJ</th>
                            <th>Email</th>
                            <th>Telefone</th>
                            <th>Status</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="companiesTableBody">
                        <!-- Companies will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Company Advantages Section -->
        <section id="company-advantages" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-gift"></i> Gerenciar Vantagens</h2>
                <button class="btn btn-primary" onclick="openAdvantageModal()">
                    <i class="fas fa-plus"></i> Nova Vantagem
                </button>
            </div>

            <!-- Search and Filter -->
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="advantageSearch" placeholder="Buscar vantagens..." onkeyup="filterAdvantages()">
                </div>
            </div>

            <!-- Advantages Table -->
            <div class="table-container">
                <table class="data-table" id="advantagesTable">
                    <thead>
                        <tr>
                            <th>Título</th>
                            <th>Descrição</th>
                            <th>Custo (Moedas)</th>
                            <th>Status</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="advantagesTableBody">
                        <!-- Advantages will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Student Advantages Section -->
        <section id="student-advantages" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-store"></i> Vantagens Disponíveis</h2>
            </div>

            <!-- Search and Filter -->
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="studentAdvantageSearch" placeholder="Buscar vantagens..." onkeyup="filterStudentAdvantages()">
                </div>
            </div>

            <!-- Advantages Grid -->
            <div id="studentAdvantagesGrid" class="advantages-grid">
                <!-- Advantages cards will be loaded here -->
            </div>
        </section>

        <!-- Student Coupons Section -->
        <section id="student-coupons" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-ticket-alt"></i> Meus Cupons Resgatados</h2>
            </div>

            <div id="studentCouponsContainer" class="coupons-container">
                <!-- Coupons will be loaded here -->
            </div>
        </section>

        <!-- Student Extract Section -->
        <section id="student-extract" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-wallet"></i> Meu Extrato de Moedas</h2>
            </div>

            <div class="account-summary">
                <div class="account-summary-card">
                    <h3>Saldo Atual</h3>
                    <p id="studentBalance" class="account-balance">0 moedas</p>
                </div>
            </div>

            <div class="table-container">
                <table class="data-table" id="studentTransactionsTable">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Tipo</th>
                            <th>Descrição</th>
                            <th>Valor</th>
                            <th>De / Para</th>
                        </tr>
                    </thead>
                    <tbody id="studentTransactionsBody">
                        <!-- Transactions will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Professor Send Coins Section -->
        <section id="professor-send-coins" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-coins"></i> Enviar Moedas para Alunos</h2>
            </div>

            <div class="account-summary">
                <div class="account-summary-card">
                    <h3>Saldo Disponível</h3>
                    <p id="professorBalanceSend" class="account-balance">0 moedas</p>
                </div>
            </div>

            <form id="sendCoinsForm" onsubmit="handleSendCoins(event)">
                <div class="form-group">
                    <label for="sendCoinsStudentEmail">Email do Aluno *</label>
                    <input type="email" id="sendCoinsStudentEmail" required placeholder="aluno@exemplo.com">
                </div>
                <div class="form-group">
                    <label for="sendCoinsAmount">Quantidade de Moedas *</label>
                    <input type="number" id="sendCoinsAmount" required min="1" step="1">
                </div>
                <div class="form-group">
                    <label for="sendCoinsReason">Motivo do Reconhecimento *</label>
                    <textarea id="sendCoinsReason" rows="4" required placeholder="Descreva o motivo pelo qual o aluno está sendo reconhecido"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Enviar Moedas
                    </button>
                </div>
            </form>
        </section>

        <!-- Professor Students Section -->
        <section id="professor-students" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-user-graduate"></i> Alunos que Receberam Moedas</h2>
            </div>

            <div id="professorStudentsContainer" class="students-container">
                <!-- Students will be loaded here -->
            </div>
        </section>

        <!-- Professor Extract Section -->
        <section id="professor-extract" class="content-section" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-list"></i> Extrato de Moedas</h2>
            </div>

            <div class="account-summary">
                <div class="account-summary-card">
                    <h3>Saldo Atual</h3>
                    <p id="professorBalance" class="account-balance">0 moedas</p>
                </div>
            </div>

            <div class="table-container">
                <table class="data-table" id="professorTransactionsTable">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Tipo</th>
                            <th>Descrição</th>
                            <th>Valor</th>
                            <th>De / Para</th>
                        </tr>
                    </thead>
                    <tbody id="professorTransactionsBody">
                        <!-- Transactions will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- Student Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="studentModalTitle">Novo Aluno</h3>
                <span class="close" onclick="closeStudentModal()">&times;</span>
            </div>
            <form id="studentForm" onsubmit="saveStudent(event)">
                <div class="form-group">
                    <label for="studentName">Nome Completo *</label>
                    <input type="text" id="studentName" required>
                </div>
                <div class="form-group">
                    <label for="studentCpf">CPF *</label>
                    <input type="text" id="studentCpf" required maxlength="14" onkeyup="formatCpf(this)">
                </div>
                <div class="form-group">
                    <label for="studentRg">RG</label>
                    <input type="text" id="studentRg">
                </div>
                <div class="form-group">
                    <label for="studentEmail">Email *</label>
                    <input type="email" id="studentEmail" required>
                </div>
                <div class="form-group">
                    <label for="studentInstitution">Instituição *</label>
                    <select id="studentInstitution" required>
                        <option value="">Selecione uma instituição</option>
                        <option value="1">Universidade Federal de Tecnologia</option>
                        <option value="2">Instituto Tecnológico Nacional</option>
                        <option value="3">Faculdade de Ciências Aplicadas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="studentCourse">Curso</label>
                    <input type="text" id="studentCourse">
                </div>
                <div class="form-group">
                    <label for="studentAddress">Endereço</label>
                    <textarea id="studentAddress" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeStudentModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Company Modal -->
    <div id="companyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="companyModalTitle">Nova Empresa</h3>
                <span class="close" onclick="closeCompanyModal()">&times;</span>
            </div>
            <form id="companyForm" onsubmit="saveCompany(event)">
                <div class="form-group">
                    <label for="companyName">Nome da Empresa *</label>
                    <input type="text" id="companyName" required>
                </div>
                <div class="form-group">
                    <label for="companyCnpj">CNPJ *</label>
                    <input type="text" id="companyCnpj" required maxlength="18" onkeyup="formatCnpj(this)">
                </div>
                <div class="form-group">
                    <label for="companyEmail">Email *</label>
                    <input type="email" id="companyEmail" required>
                </div>
                <div class="form-group">
                    <label for="companyPhone">Telefone</label>
                    <input type="text" id="companyPhone" maxlength="15" onkeyup="formatPhone(this)">
                </div>
                <div class="form-group">
                    <label for="companyWebsite">Website</label>
                    <input type="url" id="companyWebsite">
                </div>
                <div class="form-group">
                    <label for="companyDescription">Descrição</label>
                    <textarea id="companyDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="companyAddress">Endereço</label>
                    <textarea id="companyAddress" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="companyActive" checked>
                        <span class="checkmark"></span>
                        Empresa Ativa
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeCompanyModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Advantage Modal -->
    <div id="advantageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="advantageModalTitle">Nova Vantagem</h3>
                <span class="close" onclick="closeAdvantageModal()">&times;</span>
            </div>
            <form id="advantageForm" onsubmit="saveAdvantage(event)">
                <div class="form-group">
                    <label for="advantageTitle">Título *</label>
                    <input type="text" id="advantageTitle" required>
                </div>
                <div class="form-group">
                    <label for="advantageDescription">Descrição *</label>
                    <textarea id="advantageDescription" rows="4" required></textarea>
                </div>
                <div class="form-group">
                    <label for="advantageImageUrl">URL da Imagem</label>
                    <input type="url" id="advantageImageUrl" placeholder="https://exemplo.com/imagem.jpg">
                </div>
                <div class="form-group">
                    <label for="advantageCostCoins">Custo em Moedas *</label>
                    <input type="number" id="advantageCostCoins" required min="1" step="1">
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="advantageActive" checked>
                        <span class="checkmark"></span>
                        Vantagem Ativa
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAdvantageModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Tem certeza que deseja excluir este item?</p>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="closeConfirmModal()">Cancelar</button>
                <button type="button" class="btn btn-danger" onclick="confirmDelete()">Excluir</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="toast"></div>

    <script src="app.js"></script>
</body>
</html>
</html>